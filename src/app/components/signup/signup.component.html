<div class="container mt-5">
  <form class="w-50 mx-auto border p-4 rounded shadow"
        (ngSubmit)="handleSignup()"
        [formGroup]="signUpForm">
    <h4 class="mb-4 text-center text-success fs-2">Register</h4>
    @if(errorMessage){
      <div class="alert alert-danger">
        {{errorMessage}}
      </div>
    }
    <!-- Name -->
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input type="text" formControlName="name" class="form-control" id="name" placeholder="Enter your username" />
      @let name = signUpForm.get('name');
      @if(name?.touched){
        <div>
          @if(name?.getError('required')){
            <span class="text-danger">Name is required</span>
          }
          @else if (name?.getError('minlength')) {
            <span class="text-danger">Name must be at least 3 characters</span>
          }
          @else if (name?.getError('maxlength')) {
            <span class="text-danger">Name must be at most 20 characters</span>
          }
        </div>
      }
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" formControlName="email" class="form-control" id="email" placeholder="Enter your email" />
      @let email = signUpForm.get('email');
      @if(email?.touched){
        <div>
          @if(email?.getError('required')){
            <span class="text-danger">Email is required</span>
          }
          @else if(email?.getError('email')){
            <span class="text-danger">Invalid email format</span>
          }
        </div>
      }
    </div>

    <!-- Password -->
    <div class="mb-3">
      <label for="password" class="form-label">Password</label>
      <input type="password" formControlName="password" class="form-control" id="password" placeholder="Enter your password" />
      @let password = signUpForm.get('password');
      @if(password?.touched){
        <div>
          @if(password?.getError('required')){
            <span class="text-danger">Password is required</span>
          }
          @else if(password?.getError('pattern')){
            <span class="text-danger">Password must include uppercase, lowercase, number, and be at least 8 characters</span>
          }
        </div>
      }
    </div>

    <!-- Confirm Password -->
    <div class="mb-3">
      <label for="rePassword" class="form-label">Confirm Password</label>
      <input type="password" formControlName="rePassword" class="form-control" id="repassword" placeholder="Confirm your password" />
      @let rePassword = signUpForm.get('rePassword');
      @if(rePassword?.touched){
        <div>
          @if(rePassword?.getError('required')){
            <span class="text-danger">Confirmation is required</span>
          }
          @else if(signUpForm.getError('passwordMismatch')){
            <span class="text-danger">Passwords do not match</span>
          }
        </div>
      }
    </div>

    <!-- Phone -->
    <div class="mb-3">
      <label for="phone" class="form-label">Phone</label>
      <input type="tel" formControlName="phone" class="form-control" id="phone" placeholder="Enter your phone" />
      @let phone = signUpForm.get('phone');
      @if(phone?.touched){
        <div>
          @if(phone?.getError('required')){
            <span class="text-danger">Phone number is required</span>
          }
          @else if(phone?.getError('pattern')){
            <span class="text-danger">Invalid phone number format</span>
          }
        </div>
      }
    </div>

    <!-- Submit -->
    <button [disabled]="signUpForm.invalid"
    type="submit" class="btn btn-success w-100">
    @if(isLoading==false){
      <span>Sign Up</span>
    }
   @else {
    <span class="fa-solid fa-spinner fa-spin"></span>
   }
  </button>
  <p class="mt-3 text-center text-success">
     Already have an account? <a class="text-danger" routerLink="/login">Login</a>
    </p>
  </form>
</div>


