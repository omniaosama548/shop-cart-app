<div class="container mt-5">
  <form class="w-50 mx-auto border p-4 rounded shadow"
        (ngSubmit)="handleResetPassword()"
        [formGroup]="resetForm">
    <h4 class="mb-4 text-center text-success fs-2">Reset Password</h4>
    @if(errorMessage){
      <div class="alert alert-danger">
        {{errorMessage}}
      </div>
    }

    <!-- Email -->
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" formControlName="email" class="form-control" id="email" placeholder="Enter your email" />
      @let email = resetForm.get('email');
      @if(email?.touched){
        <div>
          @if(email?.getError('required')){
            <span class="text-danger">Email is required</span>
          }
          @else if(email?.getError('email')){
            <span class="text-danger">Invalid email format</span>
          }
        </div>
      }
    </div>

    <!-- Password -->
    <div class="mb-3">
      <label for="newPassword" class="form-label">New Password</label>
      <input type="password" formControlName="newPassword" class="form-control" id="password" placeholder="Enter your password" />
      @let newPassword= resetForm.get('newPassword');
      @if(newPassword?.touched){
        <div>
          @if(newPassword?.getError('required')){
            <span class="text-danger">Password is required</span>
          }
          @else if(newPassword?.getError('pattern')){
            <span class="text-danger">Password must include uppercase, lowercase, number, and be at least 8 characters</span>
          }
        </div>
      }
    </div>



    <!-- Submit -->
    <button [disabled]="resetForm.invalid"
    type="submit" class="btn btn-success w-100">
    @if(isLoading==false){
      <span>Send</span>
    }
   @else {
    <span class="fa-solid fa-spinner fa-spin"></span>
   }
  </button>

  </form>
</div>
